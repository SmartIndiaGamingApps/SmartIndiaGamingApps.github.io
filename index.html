<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Scratch Card Surprise</title>
<style>
    body {
        margin: 0;
        padding: 0;
        font-family: Arial, sans-serif;
        background: linear-gradient(135deg, #ff9a9e, #fad0c4);
        height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        flex-direction: column;
        overflow: hidden;
    }
    h1 {
        color: white;
        text-shadow: 2px 2px rgba(0,0,0,0.3);
    }
    #scratchCanvas {
        border-radius: 15px;
        box-shadow: 0 0 15px rgba(0,0,0,0.2);
        cursor: pointer;
        margin-bottom: 20px;
    }
    #message {
        font-size: 22px;
        color: #ff4081;
        font-weight: bold;
        opacity: 0;
        transition: opacity 1s;
        background: #fff8;
        padding: 12px 24px;
        border-radius: 10px;
        user-select: text;
    }
    #locked {
        font-size: 18px;
        color: #333;
        background: #ffe0e0;
        padding: 10px 20px;
        border-radius: 10px;
        box-shadow: 0 0 5px #c0c0c0;
        margin-top: 10px;
        display: none;
    }
    /* Birthday Popup */
    #birthdayPopup {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%) scale(0.5);
        background: white;
        color: #ff4081;
        font-size: 28px;
        font-weight: bold;
        padding: 20px 40px;
        border-radius: 15px;
        box-shadow: 0 0 20px rgba(0,0,0,0.3);
        opacity: 0;
        text-align: center;
        z-index: 1000;
        transition: all 0.5s ease;
    }
    #birthdayPopup.show {
        opacity: 1;
        transform: translate(-50%, -50%) scale(1);
    }
    #confettiCanvas {
        position: fixed;
        top: 0;
        left: 0;
        pointer-events: none;
        z-index: 999;
    }
    #shayari {
    font-size: 16px;
    font-weight: bold;
    color: #ff4081;
    text-align: center;
    margin-top: 10px;
    background: rgba(255,255,255,0.6);
    padding: 8px 15px;
    border-radius: 15px;
    box-shadow: 0 0 5px rgba(0,0,0,0.2);
    animation: fadeIn 2s ease-in-out;
        }
        
    /* Motivational + Dosti Text */
    #friendshipText {
        position: fixed;
        bottom: 15px;
        left: 50%;
        transform: translateX(-50%);
        background: rgba(255,255,255,0.8);
        color: #ff4081;
        padding: 10px 20px;
        border-radius: 20px;
        font-size: 16px;
        font-weight: bold;
        text-align: center;
        box-shadow: 0 0 10px rgba(0,0,0,0.2);
        animation: fadeIn 2s ease-in-out;
    }
    @keyframes fadeIn {
        from { opacity: 0; transform: translate(-50%, 20px); }
        to { opacity: 1; transform: translate(-50%, 0); }
    }
</style>
</head>
<body>
<h1>Scratch to Reveal üéÅ</h1>
<canvas id="scratchCanvas" width="320" height="180"></canvas>
<div id="message">üéâ Surprise! Tum bahut special ho! üéÅ</div>
<div id="locked">Scratch will unlock on <b>17 September 2025</b></div>
<div id="shayari">
    üåü Dosti wo hai jo hamesha tere saath khadi rahe, khushi ho ya mushkil, tu meri zindagi ka sabse bright star hai! üíñ
</div>
<div id="birthdayPopup">üéÇ Happy Birthday Bro! üéâ</div>
<canvas id="confettiCanvas"></canvas>
    
<script>
// Confetti setup
const confettiCanvas = document.getElementById('confettiCanvas');
const confettiCtx = confettiCanvas.getContext('2d');
confettiCanvas.width = window.innerWidth;
confettiCanvas.height = window.innerHeight;

let confettiPieces = [];

function createConfetti() {
    confettiPieces = [];
    for (let i = 0; i < 150; i++) {
        confettiPieces.push({
            x: Math.random() * confettiCanvas.width,
            y: Math.random() * confettiCanvas.height - confettiCanvas.height,
            r: Math.random() * 6 + 4,
            d: Math.random() * 150 + 50,
            color: `hsl(${Math.random() * 360}, 100%, 50%)`,
            tilt: Math.random() * 10 - 10
        });
    }
}
function drawConfetti() {
    confettiCtx.clearRect(0, 0, confettiCanvas.width, confettiCanvas.height);
    confettiPieces.forEach(p => {
        confettiCtx.beginPath();
        confettiCtx.arc(p.x, p.y, p.r, 0, Math.PI * 2, false);
        confettiCtx.fillStyle = p.color;
        confettiCtx.fill();
    });
    updateConfetti();
}
function updateConfetti() {
    confettiPieces.forEach(p => {
        p.y += Math.cos(p.d) + 1 + p.r / 2;
        p.x += Math.sin(p.d);
        if (p.y > confettiCanvas.height) {
            p.x = Math.random() * confettiCanvas.width;
            p.y = -10;
        }
    });
}
function animateConfetti(duration = 5000) {
    createConfetti();
    let startTime = Date.now();
    function frame() {
        drawConfetti();
        if (Date.now() - startTime < duration) {
            requestAnimationFrame(frame);
        } else {
            confettiCtx.clearRect(0, 0, confettiCanvas.width, confettiCanvas.height);
        }
    }
    frame();
}

// Popup function
function showPopup(text) {
    const popup = document.getElementById('birthdayPopup');
    popup.innerHTML = text;
    popup.classList.add('show');
    setTimeout(() => popup.classList.remove('show'), 5000);
}

// Celebration on Page Load
window.onload = () => {
    animateConfetti();
    setTimeout(() => showPopup("üéÇ Happy Birthday Bro! üéâ"), 500);
};

// Scratch logic
const scratchDate = new Date('2025-09-17T00:00:00');
const now = new Date();
const canvas = document.getElementById('scratchCanvas');
const ctx = canvas.getContext('2d');
const messageDiv = document.getElementById('message');
const lockedDiv = document.getElementById('locked');
let celebrationDone = false;

if (now < scratchDate) {
    canvas.style.opacity = 0.4;
    canvas.style.pointerEvents = 'none';
    lockedDiv.style.display = 'block';
} else {
    ctx.fillStyle = '#c0c0c0';
    ctx.fillRect(0, 0, canvas.width, canvas.height);
    ctx.font = '20px Arial';
    ctx.fillStyle = 'black';
    ctx.textAlign = 'center';
    ctx.fillText('Scratch Here!', canvas.width/2, canvas.height/2);

    let revealed = 0;
    let isDrawing = false;

    function scratch(e) {
        if (!isDrawing) return;
        e.preventDefault();
        const rect = canvas.getBoundingClientRect();
        const x = ((e.touches ? e.touches[0].clientX : e.clientX) - rect.left);
        const y = ((e.touches ? e.touches[0].clientY : e.clientY) - rect.top);

        ctx.globalCompositeOperation = 'destination-out';
        ctx.beginPath();
        ctx.arc(x, y, 16, 0, Math.PI * 2);
        ctx.fill();
        ctx.globalCompositeOperation = 'source-over';

        let imgData = ctx.getImageData(0,0,canvas.width,canvas.height);
        let cleared = 0;
        for(let i=0; i<imgData.data.length; i+=4){
            if(imgData.data[i+3] === 0) cleared++;
        }
        revealed = cleared / (canvas.width * canvas.height) * 100;
        messageDiv.style.opacity = Math.min(1, revealed/40);

        if(revealed > 40 && !celebrationDone){
            celebrationDone = true;
            messageDiv.style.opacity = 1;
            canvas.style.opacity = 0.3;
            animateConfetti();
            showPopup("üéâ Surprise Reveal! üéÅ");
        }
    }

    canvas.addEventListener('mousedown', () => isDrawing = true);
    canvas.addEventListener('mouseup', () => isDrawing = false);
    canvas.addEventListener('mouseleave', () => isDrawing = false);
    canvas.addEventListener('mousemove', scratch);
    canvas.addEventListener('touchstart', () => isDrawing = true);
    canvas.addEventListener('touchend', () => isDrawing = false);
    canvas.addEventListener('touchcancel', () => isDrawing = false);
    canvas.addEventListener('touchmove', scratch);
}
</script>
</body>
    </html>
    
